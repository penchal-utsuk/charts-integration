
export const sampleData = [
  {
    "month": 1,
    "quarter": 1,
    "sku": "Product-A",
    "product_name": "Product-A",
    "category": "daily",
    "type": "car",
    "units_sold": 105,
    "unit_price": 71.92,
    "revenue": 7551.6,
    "returns": 4,
    "gross_margin": 57.74,
    "cost_of_goods_sold": 3191.31,
    "subscription_opt_in_rate": 0.13,
    "reorder_rate": 0.44,
    "fulfilled_orders": 103,
    "backorders": 2,
    "avg_delivery_days": 3.9,
    "customer_rating": 5.0,
    "discount_rate": 0.28,
    "marketing_spend": 1304.81,
    "cpa": 12.79,
    "cart_abandonment_rate": 0.22,
    "impressions": 5010,
    "clicks": 246,
    "ctr": 4.91,
    "avg_session_duration_sec": 194.5,
    "bounce_rate": 0.57,
    "customer_id": "CAR-1",
    "customer_name": "CAR-1",
    "customer_tenure_days": 729,
    "avg_order_value": 71.92,
    "ltv": 215.76,
    "region": "Africa"
  },
  {
    "month": 2,
    "quarter": 1,
    "sku": "Product-B",
    "product_name": "Product-B",
    "category": "daily",
    "type": "car",
    "units_sold": 89,
    "unit_price": 68.45,
    "revenue": 6092.05,
    "returns": 3,
    "gross_margin": 55.20,
    "cost_of_goods_sold": 2729.28,
    "subscription_opt_in_rate": 0.15,
    "reorder_rate": 0.41,
    "fulfilled_orders": 87,
    "backorders": 2,
    "avg_delivery_days": 4.1,
    "customer_rating": 4.8,
    "discount_rate": 0.25,
    "marketing_spend": 1156.39,
    "cpa": 13.00,
    "cart_abandonment_rate": 0.24,
    "impressions": 4720,
    "clicks": 198,
    "ctr": 4.19,
    "avg_session_duration_sec": 182.3,
    "bounce_rate": 0.61,
    "customer_id": "CUST0045",
    "customer_name": "Customer_045",
    "customer_tenure_days": 456,
    "avg_order_value": 68.45,
    "ltv": 187.63,
    "region": "Europe"
  },
  {
    "month": 3,
    "quarter": 1,
    "sku": "Product-C",
    "product_name": "Product-C",
    "category": "daily",
    "type": "car",
    "units_sold": 134,
    "unit_price": 82.15,
    "revenue": 11008.1,
    "returns": 2,
    "gross_margin": 62.80,
    "cost_of_goods_sold": 4094.01,
    "subscription_opt_in_rate": 0.18,
    "reorder_rate": 0.52,
    "fulfilled_orders": 132,
    "backorders": 2,
    "avg_delivery_days": 3.5,
    "customer_rating": 4.9,
    "discount_rate": 0.22,
    "marketing_spend": 1761.30,
    "cpa": 13.15,
    "cart_abandonment_rate": 0.19,
    "impressions": 6250,
    "clicks": 312,
    "ctr": 4.99,
    "avg_session_duration_sec": 205.7,
    "bounce_rate": 0.53,
    "customer_id": "CUST0078",
    "customer_name": "Customer_078",
    "customer_tenure_days": 892,
    "avg_order_value": 82.15,
    "ltv": 246.45,
    "region": "North America"
  },
  {
    "month": 4,
    "quarter": 2,
    "sku": "Product-D",
    "product_name": "Product-D",
    "category": "bi-weekly",
    "type": "car",
    "units_sold": 78,
    "unit_price": 89.30,
    "revenue": 6965.4,
    "returns": 1,
    "gross_margin": 58.90,
    "cost_of_goods_sold": 2862.54,
    "subscription_opt_in_rate": 0.20,
    "reorder_rate": 0.65,
    "fulfilled_orders": 77,
    "backorders": 1,
    "avg_delivery_days": 4.2,
    "customer_rating": 4.7,
    "discount_rate": 0.18,
    "marketing_spend": 1114.46,
    "cpa": 14.29,
    "cart_abandonment_rate": 0.16,
    "impressions": 3890,
    "clicks": 156,
    "ctr": 4.01,
    "avg_session_duration_sec": 198.2,
    "bounce_rate": 0.48,
    "customer_id": "CUST0123",
    "customer_name": "Customer_123",
    "customer_tenure_days": 634,
    "avg_order_value": 89.30,
    "ltv": 267.90,
    "region": "Asia"
  },
  {
    "month": 5,
    "quarter": 2,
    "sku": "Product-E",
    "product_name": "Product-E",
    "category": "monthly",
    "type": "car",
    "units_sold": 67,
    "unit_price": 95.75,
    "revenue": 6415.25,
    "returns": 3,
    "gross_margin": 61.25,
    "cost_of_goods_sold": 2486.09,
    "subscription_opt_in_rate": 0.22,
    "reorder_rate": 0.73,
    "fulfilled_orders": 64,
    "backorders": 3,
    "avg_delivery_days": 3.8,
    "customer_rating": 4.6,
    "discount_rate": 0.15,
    "marketing_spend": 1027.44,
    "cpa": 15.34,
    "cart_abandonment_rate": 0.14,
    "impressions": 3340,
    "clicks": 134,
    "ctr": 4.01,
    "avg_session_duration_sec": 221.4,
    "bounce_rate": 0.44,
    "customer_id": "CUST0067",
    "customer_name": "Customer_067",
    "customer_tenure_days": 1205,
    "avg_order_value": 95.75,
    "ltv": 287.25,
    "region": "South America"
  },
  {
    "month": 6,
    "quarter": 2,
    "sku": "Product-F",
    "product_name": "Product-F",
    "category": "monthly",
    "type": "car",
    "units_sold": 92,
    "unit_price": 78.60,
    "revenue": 7231.2,
    "returns": 4,
    "gross_margin": 56.45,
    "cost_of_goods_sold": 3151.39,
    "subscription_opt_in_rate": 0.19,
    "reorder_rate": 0.58,
    "fulfilled_orders": 88,
    "backorders": 4,
    "avg_delivery_days": 4.0,
    "customer_rating": 4.8,
    "discount_rate": 0.21,
    "marketing_spend": 1157.79,
    "cpa": 12.58,
    "cart_abandonment_rate": 0.18,
    "impressions": 4600,
    "clicks": 184,
    "ctr": 4.00,
    "avg_session_duration_sec": 189.6,
    "bounce_rate": 0.52,
    "customer_id": "CUST0156",
    "customer_name": "Customer_156",
    "customer_tenure_days": 387,
    "avg_order_value": 78.60,
    "ltv": 235.80,
    "region": "Europe"
  }
];

export const aggregateDataByDimension = (data: typeof sampleData, dimension: 'product' | 'month' | 'quarter' | 'region') => {
  const aggregated = data.reduce((acc, item) => {
    let key = '';
    switch (dimension) {
      case 'product':
        key = item.product_name;
        break;
      case 'month':
        key = `Month ${item.month}`;
        break;
      case 'quarter':
        key = `Q${item.quarter}`;
        break;
      case 'region':
        key = item.region;
        break;
    }
    
    if (!acc[key]) {
      acc[key] = 0;
    }
    acc[key] += item.revenue;
    return acc;
  }, {} as Record<string, number>);
  
  return Object.entries(aggregated).map(([name, revenue]) => ({
    name,
    revenue: Math.round(revenue * 100) / 100
  }));
};
